function electionStyle(e){return{fillColor:electionGetColor(e.properties.PER_DEM),weight:1,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}function censusStyle(e){return{fillColor:censusGetColor(e.properties.PER_CHA),weight:1,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}function demoStyle(e){return{fillColor:demoGetColor(e.properties.PER_WHITE),weight:1,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}function statesStyle(e){return{weight:3,opacity:1,color:"black",dashArray:"3",fillOpacity:.7}}function electionGetColor(e){return e>80?"#104896":e>60?"#2d67b7":e>55?"#4880ce":e>50?"#87b9ff":e>45?"#f7d4d4":e>40?"#ff9696":e>20?"#ff6d6d":e>0?"#ff2b2b":"#01347c"}function censusGetColor(e){return e>30?"#b30000":e>25?"#e60000":e>20?"#ff1a1a":e>15?"#ff4d4d":e>10?"#ff8080":e>5?"#ffb3b3":e>0?"#ffe6e6":e>-5?"#9999ff":"#00008B"}function demoGetColor(e){return e>95?"#b30000":e>90?"#e60000":e>85?"#ff1a1a":e>80?"#ff4d4d":e>75?"#ff8080":e>70?"#ffb3b3":e>65?"#ffe6e6":e>60?"#9999ff":"#00008B"}function highlightFeature(e){var t=e.target;t.setStyle({weight:4,color:"black",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||t.bringToFront()}function resetHighlightElection(e){election2012.resetStyle(e.target)}function resetHighlightCensus(e){census2010.resetStyle(e.target)}function resetHighlightDemo(e){demo2010.resetStyle(e.target)}function zoomToFeature(e){map.fitBounds(e.target.getBounds())}function insertElectionChart(){var e=document.getElementById("myChart");new Chart(e,{type:"pie",data:{labels:["Democrat","Republican"],datasets:[{data:election_data,borderWidth:1,backgroundColor:["blue","red"]}]},options:{animation:{duration:1e3,easing:"easeInExpo"},maintainAspectRatio:!0}})}function insertCensusChart(){var e=document.getElementById("myChart");new Chart(e,{type:"line",data:{labels:labels,datasets:[{label:"Population Growth",data:census_data,borderWidth:1,backgroundColor:["red"],borderColor:"red",lineTension:.1,fill:!1}]},options:{animation:{duration:500,easing:"easeInExpo"},maintainAspectRatio:!0}})}function insertDemoChart(){var e=document.getElementById("myChart");new Chart(e,{type:"bar",data:{labels:demolabels,datasets:[{label:"Race by Percentage of Total",data:demo_data,borderWidth:1,borderColor:"red",lineTension:.1,fill:!1}]},options:{animation:{duration:1e3,easing:"easeInExpo"},maintainAspectRatio:!0}})}function election_onEachFeature(e,t){t.on({mouseover:highlightFeature,mouseout:resetHighlightElection,click:zoomToFeature}),t.on("click",function(t){document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',election_data=[e.properties.PER_DEM,e.properties.PER_REP],insertElectionChart(),document.getElementById("sbar-table").innerHTML=e.properties.COUNTY+", "+e.properties.STATE+'<span class="sidebar-close"><i class="fa fa-caret-left" title="Click to collapse sidebar"></i></span>',document.getElementById("sbar-header").innerHTML=e.properties.COUNTY+", "+e.properties.STATE+'<span class="sidebar-close"><i class="fa fa-caret-left" title="Click to collapse sidebar"></i></span>',document.getElementById("democrat").innerHTML=parseFloat(e.properties.PER_DEM).toFixed(2)+"%",document.getElementById("republican").innerHTML=parseFloat(e.properties.PER_REP).toFixed(2)+"%",document.getElementById("independent").innerHTML=parseFloat(e.properties.PER_OTH).toFixed(2)+"%",document.getElementById("democratTotal").innerHTML=parseInt(e.properties.TOT_DEM).toLocaleString(),document.getElementById("republicanTotal").innerHTML=parseInt(e.properties.TOT_REP).toLocaleString(),document.getElementById("independentTotal").innerHTML=parseInt(e.properties.TOT_OTH).toLocaleString()}),e.properties&&t.bindTooltip("<b><u class = 'popup_title'><big>"+e.properties.COUNTY+", "+e.properties.STATE+"</b></u></big><br><div class = 'popup_body'> <b>Democrat:&nbsp;</b>"+Number(e.properties.PER_DEM).toFixed(2)+"%<br> <b>Republican:&nbsp;</b>"+Number(e.properties.PER_REP).toFixed(2)+"%</div>",{permanent:!1})}function census_onEachFeature(e,t){t.on({mouseover:highlightFeature,mouseout:resetHighlightCensus,click:zoomToFeature}),t.on("click",function(t){document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',census_data=[Number(e.properties.TOT_1980),Number(e.properties.TOT_1990),e.properties.TOT_CUR],map.hasLayer(census2000)===!0&&(labels=["1980","1990","2000"],document.getElementById("census_table").innerHTML='<table class="table table-hover"><tr><th>2000 Growth:</th><td id="growth_2000"></td></tr><tr><th>2000 Pop:</th><td id="total_pop"></td></tr><tr><th>1990 Pop:</th><td id="pop_1990"></td></tr><tr><th>1980 Pop:</th><td id="pop_1980"></td></tr></table>',document.getElementById("total_pop").innerHTML=parseInt(e.properties.TOT_CUR).toLocaleString(),document.getElementById("pop_1990").innerHTML=parseInt(e.properties.TOT_1990).toLocaleString(),document.getElementById("pop_1980").innerHTML=parseInt(e.properties.TOT_1980).toLocaleString(),document.getElementById("growth_2000").innerHTML=e.properties.PER_CHA+"%"),map.hasLayer(census2010)===!0&&(census_data=[Number(e.properties.TOT_1980),Number(e.properties.TOT_1990),Number(e.properties.TOT_2000),e.properties.TOT_CUR],labels=["1980","1990","2000","2010"],document.getElementById("census_table").innerHTML='<table class="table table-hover"><tr><th>2010 Growth:</th><td id="growth_2010"></td></tr><tr><th>2010 Pop:</th><td id="total_pop"></td></tr><tr><th>2000 Pop:</th><td id="pop_2000"></td></tr><tr><th>1990 Pop:</th><td id="pop_1990"></td></tr><tr><th>1980 Pop:</th><td id="pop_1980"></td></tr></table>',document.getElementById("total_pop").innerHTML=parseInt(e.properties.TOT_CUR).toLocaleString(),document.getElementById("pop_2000").innerHTML=parseInt(e.properties.TOT_2000).toLocaleString(),document.getElementById("pop_1990").innerHTML=parseInt(e.properties.TOT_1990).toLocaleString(),document.getElementById("pop_1980").innerHTML=parseInt(e.properties.TOT_1980).toLocaleString(),document.getElementById("growth_2010").innerHTML=e.properties.PER_CHA+"%"),insertCensusChart(),document.getElementById("sbar-table").innerHTML=e.properties.COUNTY+", "+e.properties.STATE+'<span class="sidebar-close"><i class="fa fa-caret-left" title="Click to collapse sidebar"></i></span>',document.getElementById("sbar-header").innerHTML=e.properties.COUNTY+", "+e.properties.STATE+'<span class="sidebar-close"><i class="fa fa-caret-left" title="Click to collapse sidebar"></i></span>'}),e.properties&&t.bindTooltip("<b><u class = 'popup_title'><big>"+e.properties.COUNTY+", "+e.properties.STATE+"</b></u></big><div class='popup_body'> <b>Total Population:&nbsp;</b>"+parseInt(e.properties.TOT_CUR).toLocaleString()+"<br> <b>Growth Over Decade:&nbsp;</b>"+e.properties.PER_CHA+"%</div>",{permanent:!1})}function demo_onEachFeature(e,t){t.on({mouseover:highlightFeature,mouseout:resetHighlightDemo,click:zoomToFeature}),t.on("click",function(t){document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',demo_data=[e.properties.PER_WHITE,e.properties.PER_BLACK,e.properties.PER_NAT,e.properties.PER_ASIAN,e.properties.PER_HAW,e.properties.PER_MULTI,e.properties.PER_LAT],insertDemoChart(),document.getElementById("sbar-table").innerHTML=e.properties.COUNTY+", "+e.properties.STATE+'<span class="sidebar-close"><i class="fa fa-caret-left" title="Click to collapse sidebar"></i></span>',document.getElementById("sbar-header").innerHTML=e.properties.COUNTY+", "+e.properties.STATE+'<span class="sidebar-close"><i class="fa fa-caret-left" title="Click to collapse sidebar"></i></span>',document.getElementById("white").innerHTML=parseFloat(e.properties.PER_WHITE).toFixed(2)+"%",document.getElementById("black").innerHTML=parseFloat(e.properties.PER_BLACK).toFixed(2)+"%",document.getElementById("native").innerHTML=parseFloat(e.properties.PER_NAT).toFixed(2)+"%",document.getElementById("asian").innerHTML=parseFloat(e.properties.PER_ASIAN).toFixed(2)+"%",document.getElementById("pacific").innerHTML=parseFloat(e.properties.PER_HAW).toFixed(2)+"%",document.getElementById("multiracial").innerHTML=parseFloat(e.properties.PER_MULTI).toFixed(2)+"%",document.getElementById("hispanic").innerHTML=parseFloat(e.properties.PER_LAT).toFixed(2)+"%",document.getElementById("whiteTotal").innerHTML=parseInt(e.properties.TOT_WHITE).toLocaleString(),document.getElementById("blackTotal").innerHTML=parseInt(e.properties.TOT_BLACK).toLocaleString(),document.getElementById("nativeTotal").innerHTML=parseInt(e.properties.TOT_NAT).toLocaleString(),document.getElementById("asianTotal").innerHTML=parseInt(e.properties.TOT_ASIAN).toLocaleString(),document.getElementById("pacificTotal").innerHTML=parseInt(e.properties.TOT_HAW).toLocaleString(),document.getElementById("multiracialTotal").innerHTML=parseInt(e.properties.TOT_MULTI).toLocaleString(),document.getElementById("hispanicTotal").innerHTML=parseInt(e.properties.TOT_LAT).toLocaleString()}),e.properties&&($(window).width()<450?t.bindTooltip("<b><u class = 'popup_title'><big>"+e.properties.COUNTY+", "+e.properties.STATE+"</b></u></big><div class = 'popup_body'> <b>White:&nbsp;</b>"+e.properties.PER_WHITE+"%<br> <b>Black:&nbsp;</b>"+e.properties.PER_BLACK+"%<br> <b>Nat. Am/Nat. AK:&nbsp;</b>"+e.properties.PER_NAT+"%<br> <b>Asian:&nbsp;</b>"+e.properties.PER_ASIAN+"%<br> <b>Nat. HI/Pac-Isl:&nbsp;</b>"+e.properties.PER_HAW+"%<br> <b>Multiracial:&nbsp;</b>"+e.properties.PER_MULTI+"%<br> <b>Hispanic/Lat:&nbsp;</b>"+e.properties.PER_LAT+"%</div>",{permanent:!1}):t.bindTooltip("<b><u class = 'popup_title'><big>"+e.properties.COUNTY+", "+e.properties.STATE+"</b></u></big><div class = 'popup_body'> <b>White:&nbsp;</b>"+e.properties.PER_WHITE+"%<br> <b>Black or African American:&nbsp;</b>"+e.properties.PER_BLACK+"%<br> <b>American Indian or Alaska Native:&nbsp;</b>"+e.properties.PER_NAT+"%<br> <b>Asian:&nbsp;</b>"+e.properties.PER_ASIAN+"%<br> <b>Native Hawaiin or Other Pacific Islander:&nbsp;</b>"+e.properties.PER_HAW+"%<br> <b>Multiracial:&nbsp;</b>"+e.properties.PER_MULTI+"%<br> <b>Hispanic or Latino:&nbsp;</b>"+e.properties.PER_LAT+"%</div>",{permanent:!1}))}function collapse_sidebar(e){document.getElementById(e).addEventListener("click",function(){document.getElementById("sidebar").className="sidebar sidebar-left collapsed"})}var election2012,election2008,census2010,census2000,demo2010,demo2000,states,election_data,census_data,demo_data,labels,map,sidebar,osm,electionLegend,censusLegend,demoLegend,currentLegend,currentMap,currentTable,options;if($(window).width()>450)var demolabels=["White",["Black or","African American"],["American Indian or","Alaska Native"],"Asian",["Native Hawaiian or","Other Pacific Islander"],["Multiracial"],["Hispanic or","Latino"]];else var demolabels=["White",["Black"],["Nat. Am/Nat. AK."],"Asian",["Nat. HI/Pac-Isl"],["Multiracial"],["Hisp/Lat"]];map=L.map("map",{center:[39.1,-94.5],zoom:4.5,zoomControl:!1}),map.createPane("labels"),map.getPane("labels").style.zIndex=500,map.getPane("labels").style.pointerEvents="none",osm=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(map),election2012=new L.GeoJSON.AJAX("geography/election2012-min.geojson",{style:electionStyle,onEachFeature:election_onEachFeature}).addTo(map),election2008=new L.GeoJSON.AJAX("geography/election2008-min.geojson",{style:electionStyle,onEachFeature:election_onEachFeature}),census2000=new L.GeoJSON.AJAX("geography/census2000-min.geojson",{style:censusStyle,onEachFeature:census_onEachFeature}),census2010=new L.GeoJSON.AJAX("geography/census2010-min.geojson",{style:censusStyle,onEachFeature:census_onEachFeature}),demo2000=new L.GeoJSON.AJAX("geography/race2000-min.geojson",{style:demoStyle,onEachFeature:demo_onEachFeature}),demo2010=new L.GeoJSON.AJAX("geography/race2010-min.geojson",{style:demoStyle,onEachFeature:demo_onEachFeature}),states=new L.GeoJSON.AJAX("geography/states-min.geojson",{style:statesStyle,pane:"labels"}).addTo(map),sidebar=L.control.sidebar("sidebar").addTo(map),collapse_sidebar("sbar-header"),collapse_sidebar("sbar-table"),document.getElementById("disable_legend").addEventListener("click",function(){document.getElementById("disable_legend").checked?map.removeControl(currentLegend):map.addControl(currentLegend)}),document.getElementById("bigMapMode").addEventListener("click",function(){if(document.getElementById("bigMapMode").checked){var e=document.getElementsByTagName("body")[0],t=document.getElementsByTagName("html")[0];e.style.padding="0",e.style.height="100%",t.style.height="100%",map.invalidateSize()}else{var e=document.getElementsByTagName("body")[0],t=document.getElementsByTagName("html")[0];e.style.padding="70px 2% 0 2%",e.style.height="94%",t.style.height="94%",map.invalidateSize()}}),$("#sidebar").draggable(),$("#sidebar").draggable("option","handle","h1, #info_chart, #table, #settings, #sbar-tabs"),L.control.scale().addTo(map),new L.Control.Zoom({position:"topright"}).addTo(map),electionLegend=L.control({position:"bottomright"}),electionLegend.onAdd=function(e){for(var t=L.DomUtil.create("div","legend"),n=[0,20,40,45,50,55,60,80],r=0;r<n.length;r++)t.innerHTML+='<i style="background:'+electionGetColor(n[r]+.01)+'"></i> '+n[r]+(n[r+1]?"&ndash;"+n[r+1]+"%<br>":"%+");return t},censusLegend=L.control({position:"bottomright"}),censusLegend.onAdd=function(e){var t=L.DomUtil.create("div","legend");return t.innerHTML+='<table id="legendTable" cellspacing="0" style="width:100%"><tr><td class="color" id="colorlegend1"></td><td>30%+</td></tr><tr><td class="color" id="colorlegend2"></td><td>25-30%</td></tr></tr><tr><td class="color" id="colorlegend3"></td><td>20-25%</td></tr></tr><tr><td class="color" id="colorlegend4"></td><td>15-20%</td></tr></tr><tr><td class="color" id="colorlegend5"></td><td>10-15%</td></tr></tr><tr><td class="color" id="colorlegend6"></td><td>5-10%</td></tr></tr><tr><td class="color" id="colorlegend7"></td><td>0-5%</td></tr></tr><tr><td class="color" id="colorlegend8"></td><td>-5-0%</td></tr></tr><tr><td class="color" id="colorlegend9"></td><td><-5%</td></tr>',t},demoLegend=L.control({position:"bottomright"}),demoLegend.onAdd=function(e){for(var t=L.DomUtil.create("div","legend"),n=[0,60,65,70,75,80,85,90,95],r=0;r<n.length;r++)t.innerHTML+='<i style="background:'+demoGetColor(n[r]+.01)+'"></i> '+n[r]+(n[r+1]?"&ndash;"+n[r+1]+"%<br>":"%+");return t},electionLegend.addTo(map),currentLegend=electionLegend,election2012.on("data:loaded",function(){$(".loader").fadeOut("slow")}),$(window).width()<450&&(document.getElementById("sidebar").className="sidebar sidebar-left",document.getElementById("infotab").className="active",document.getElementById("info_chart").className="sidebar-pane ui-draggable-handle active",document.getElementById("userMessage").innerHTML="Scroll down for info charts and map options.",document.getElementById("countySearch").innerHTML="<input type='text' id='county_search' class='form-control' placeholder='Find a county'/>",document.getElementById("searchDiv").innerHTML=""),options={data:coordinates,getValue:"County",list:{maxNumberOfElements:6,match:{enabled:!0},onChooseEvent:function(){var e=$("#county_search").getSelectedItemData().Latitude,t=$("#county_search").getSelectedItemData().Longitude;map.setView([e,t],9)}}},$("#county_search").easyAutocomplete(options),currentMap=election2012,currentTable=document.getElementById("election_table"),document.getElementById("mapTitleText").innerHTML="<center>2012: PERCENT VOTE FOR PRESIDENTIAL DEMOCRATIC CANDIDATE</center>",$(".election_08").click(function(){map.addLayer(election2008),map.removeLayer(currentMap),currentMap=election2008,document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',document.getElementById("mapTitleText").innerHTML="<center>2008: PERCENT VOTE FOR PRESIDENTIAL DEMOCRATIC CANDIDATE</center>",map.removeControl(currentLegend),currentLegend=electionLegend,electionLegend.addTo(map),currentTable.style.display="none",currentTable=document.getElementById("election_table"),currentTable.style.display="inline"}),$(".election_12").click(function(){map.addLayer(election2012),map.removeLayer(currentMap),currentMap=election2012,document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',document.getElementById("mapTitleText").innerHTML="<center>2012: PERCENT VOTE FOR PRESIDENTIAL DEMOCRATIC CANDIDATE</center>",map.removeControl(currentLegend),currentLegend=electionLegend,electionLegend.addTo(map),currentTable.style.display="none",currentTable=document.getElementById("election_table"),currentTable.style.display="inline"}),$(".census_00").click(function(){map.addLayer(census2000),map.removeLayer(currentMap),currentMap=census2000,document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',document.getElementById("mapTitleText").innerHTML="<center>2000: POPULATION GROWTH SINCE 1990 </center>",map.removeControl(currentLegend),currentLegend=censusLegend,censusLegend.addTo(map),currentTable.style.display="none",currentTable=document.getElementById("census_table"),currentTable.style.display="inline"}),$(".census_10").click(function(){map.addLayer(census2010),map.removeLayer(currentMap),currentMap=census2010,document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',document.getElementById("mapTitleText").innerHTML="<center>2010: POPULATION GROWTH SINCE 2000 </center>",map.removeControl(currentLegend),currentLegend=censusLegend,censusLegend.addTo(map),currentTable.style.display="none",currentTable=document.getElementById("census_table"),currentTable.style.display="inline"}),$(".demo_00").click(function(){map.addLayer(demo2000),map.removeLayer(currentMap),currentMap=demo2000,document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',document.getElementById("mapTitleText").innerHTML="<center>2000: PERCENT WHITE </center>",map.removeControl(currentLegend),currentLegend=demoLegend,demoLegend.addTo(map),currentTable.style.display="none",currentTable=document.getElementById("demo_table"),currentTable.style.display="inline"}),$(".demo_10").click(function(){map.addLayer(demo2010),map.removeLayer(currentMap),currentMap=demo2010,document.getElementById("chart_container").innerHTML='<canvas id="myChart" height="90px" width="100px"></canvas>',document.getElementById("mapTitleText").innerHTML="<center>2010: PERCENT WHITE </center>",map.removeControl(currentLegend),currentLegend=demoLegend,demoLegend.addTo(map),currentTable.style.display="none",currentTable=document.getElementById("demo_table"),currentTable.style.display="inline"}),$(".state_outlines").click(function(){map.hasLayer(states)===!1?map.addLayer(states):map.removeLayer(states)}),$(".base_map").click(function(){map.hasLayer(osm)===!1?map.addLayer(osm):map.removeLayer(osm)});